@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import 'katex/dist/katex.min.css';

/* UniversalSans font - fallback to system fonts if not available */
@font-face {
  font-family: 'UniversalSans';
  src: local('UniversalSans'), local('Universal Sans'),
       local('Helvetica Neue'), local('Helvetica'),
       local('Arial'), local('system-ui');
  font-weight: 300;
  font-style: normal;
}

@font-face {
  font-family: 'UniversalSans';
  src: local('UniversalSans'), local('Universal Sans'),
       local('Helvetica Neue'), local('Helvetica'),
       local('Arial'), local('system-ui');
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: 'UniversalSans';
  src: local('UniversalSans'), local('Universal Sans'),
       local('Helvetica Neue'), local('Helvetica'),
       local('Arial'), local('system-ui');
  font-weight: 500;
  font-style: normal;
}

@font-face {
  font-family: 'UniversalSans';
  src: local('UniversalSans'), local('Universal Sans'),
       local('Helvetica Neue'), local('Helvetica'),
       local('Arial'), local('system-ui');
  font-weight: 600;
  font-style: normal;
}

@font-face {
  font-family: 'UniversalSans';
  src: local('UniversalSans'), local('Universal Sans'),
       local('Helvetica Neue'), local('Helvetica'),
       local('Arial'), local('system-ui');
  font-weight: 700;
  font-style: normal;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Sidebar variables */
    --sidebar-width: 320px;
    --bg-elevated-secondary: #f8f9fa;
    --border-token-border-light: #e5e7eb;

    /* Message variables */
    --user-message-bg: #2563eb;
    --agent-message-bg: var(--bg-elevated-secondary);
  }

  /* Dark mode overrides */
  [data-theme="dark"] {
    --bg-elevated-secondary: #1f2937;
    --border-token-border-light: #374151;
    --agent-message-bg: #1f2937;
  }

  /* Also support class-based dark mode */
  .dark {
    --bg-elevated-secondary: #1f2937;
    --border-token-border-light: #374151;
    --agent-message-bg: #1f2937;
  }

  body {
    @apply bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply btn bg-blue-600 text-white hover:bg-blue-700;
  }

  .btn-secondary {
    @apply btn bg-gray-200 text-gray-900 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600;
  }

  .btn-outline {
    @apply btn border border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-800;
  }

  .card {
    @apply rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-800;
  }

  .input {
    @apply flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 dark:placeholder:text-gray-400;
  }

  /* Custom sidebar classes */
  .border-token-border-light {
    border-color: var(--border-token-border-light);
  }

  .z-21 {
    z-index: 21;
  }

  .border-e {
    border-right-width: 1px;
  }

  /* Text utilities */
  .text-nowrap {
    white-space: nowrap;
  }

  .mask-fade-right {
    mask-image: linear-gradient(to right, black 85%, transparent 100%);
    -webkit-mask-image: linear-gradient(to right, black 85%, transparent 100%);
  }

  /* UniversalSans Typography Classes */
  .font-universal {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
  }

  .text-universal-14 {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-size: 14px;
    line-height: 1.4;
  }

  .text-universal-16 {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-size: 16px;
    line-height: 1.5;
  }

  /* Base text size override for messages */
  .text-base {
    font-size: 16px !important;
    line-height: 1.5 !important;
  }

  .text-universal-12 {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-size: 12px;
    line-height: 1.3;
  }

  /* Message specific styles */
  .message-text {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-size: 14px;
    line-height: 1.5;
    font-weight: 400;
    letter-spacing: -0.01em;
  }

  .session-title {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-size: 14px;
    line-height: 1.4;
    font-weight: 500;
    letter-spacing: -0.01em;
  }

  /* Additional font weights */
  .font-universal-light {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-weight: 300;
  }

  .font-universal-regular {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-weight: 400;
  }

  .font-universal-medium {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-weight: 500;
  }

  .font-universal-semibold {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-weight: 600;
  }

  .font-universal-bold {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
    font-weight: 700;
  }

  /* Markdown content styling */
  .message-renderer {
    font-family: 'UniversalSans', 'Helvetica Neue', 'Helvetica', 'Arial', system-ui, sans-serif;
  }

  .message-renderer .inline-code {
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
  }

  .message-renderer .code-content {
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
  }

  /* KaTeX math styling */
  .katex {
    font-size: 1em !important;
  }

  .katex-display {
    margin: 1rem 0 !important;
  }

  /* Responsive utilities */
  @media (max-width: 768px) {
    .max-md\:hidden {
      display: none;
    }

    :root {
      --sidebar-width: 280px;
    }
  }

  @media (max-width: 640px) {
    :root {
      --sidebar-width: 100vw;
    }
  }
}
